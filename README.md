from telethon import TelegramClient, events
from telethon.errors import RPCError, FloodWaitError
from colorama import Fore, Style, init
import logging
import random
import asyncio
import time

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è colorama
init(autoreset=True)

# –¢–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ
API_ID = 29432999  # –£–∫–∞–∂–∏—Ç–µ –≤–∞—à API_ID
API_HASH = "0641784fe55901bbf031dbbd3f0db961"  # –£–∫–∞–∂–∏—Ç–µ –≤–∞—à API_HASH
SESSION_NAME = "userbot_session"  # –ù–∞–∑–≤–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–∫—Å–∏ (–ø—Ä–∏–º–µ—Ä —Å SOCKS5)
proxy = ('socks5', 'proxy_address', proxy_port)  # –£–∫–∞–∂–∏—Ç–µ –∞–¥—Ä–µ—Å –∏ –ø–æ—Ä—Ç –ø—Ä–æ–∫—Å–∏

# –°–æ–∑–¥–∞—ë–º –∫–ª–∏–µ–Ω—Ç —Å –ø—Ä–æ–∫—Å–∏
client = TelegramClient(SESSION_NAME, API_ID, API_HASH, proxy=proxy)

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(
    level=logging.INFO,
    format="%(asctime)s - %(levelname)s - %(message)s",
    handlers=[
        logging.FileHandler("userbot.log"),
        logging.StreamHandler()
    ]
)

# –ù–æ–≤—ã–π —Å–ø–∏—Å–æ–∫ —Ñ—Ä–∞–∑ –¥–ª—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
comment_phrases = [
    """–ì—Ä—É–∑–æ–ø–µ—Ä–µ–≤–æ–∑–∫–∏ –ø–æ –≥–æ—Ä–æ–¥—É –∏ –æ–±–ª–∞—Å—Ç–∏!\n\n–ò—â–µ—Ç–µ –Ω–∞–¥—ë–∂–Ω—ã–µ –≥—Ä—É–∑–æ–ø–µ—Ä–µ–≤–æ–∑–∫–∏? –ú—ã –≥–æ—Ç–æ–≤—ã –ø–æ–º–æ—á—å –≤–∞–º –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è! –†–∞—Å—Å—á–∏—Ç–∞–µ–º —Å—Ç–æ–∏–º–æ—Å—Ç—å –≤–∞—à–µ–π –ø–µ—Ä–µ–≤–æ–∑–∫–∏, —É—á–∏—Ç—ã–≤–∞—è –≤—Å–µ –¥–µ—Ç–∞–ª–∏: –º–∞—Ä—à—Ä—É—Ç, —Ç–∏–ø –≥—Ä—É–∑–∞, –≤–µ—Å –∏ –≥–∞–±–∞—Ä–∏—Ç—ã.\n\n–ù–∞—à–∏ —Ç–∞—Ä–∏—Ñ—ã:\n\n–ì–ê–ó–µ–ª—å (–ø–æ –≥–æ—Ä–æ–¥—É): –æ—Ç 900 —Ä—É–±./—á–∞—Å (–º–∏–Ω–∏–º—É–º 2 —á–∞—Å–∞).\n–ú–µ–∂–≥–æ—Ä–æ–¥ (–±–æ–ª–µ–µ 200 –∫–º): –æ—Ç 40 —Ä—É–±./–∫–º.\n–ù–æ–≤—ã–µ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏: –æ—Ç 46 —Ä—É–±./–∫–º –æ—Ç –º–µ—Å—Ç–∞ –ø–æ–≥—Ä—É–∑–∫–∏.\n–£—Å–ª—É–≥–∏ –≥—Ä—É–∑—á–∏–∫–æ–≤: –æ—Ç 500 —Ä—É–±./—á–∞—Å.\n\n–ù–∞—à–∏ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:\n‚úî –ê–∫–∫—É—Ä–∞—Ç–Ω–∞—è –ø–æ–≥—Ä—É–∑–∫–∞ –∏ —Ä–∞–∑–≥—Ä—É–∑–∫–∞.\n‚úî –ö–≤–∞–ª–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≥—Ä—É–∑—á–∏–∫–∏.\n‚úî –ß–∏—Å—Ç—ã–π –∏ –≤–º–µ—Å—Ç–∏—Ç–µ–ª—å–Ω—ã–π –∫—É–∑–æ–≤.\n‚úî –†–∞–±–æ—Ç–∞–µ–º –ø–æ –≥–æ—Ä–æ–¥—É, –æ–±–ª–∞—Å—Ç–∏ –∏ –≤ –¥—Ä—É–≥–∏—Ö —Ä–µ–≥–∏–æ–Ω–∞—Ö.\n‚úî –°—Ä–æ—á–Ω–∞—è –ø–æ–¥–∞—á–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—è ‚Äî –∫—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω–æ.\n‚úî –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ü–µ–Ω—ã.\n\n–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª—è:\n\n–î–ª–∏–Ω–∞: 4 –º.\n–í—ã—Å–æ—Ç–∞: 1,76 –º.\n–®–∏—Ä–∏–Ω–∞: 1,80 –º.\n–ì—Ä—É–∑–æ–ø–æ–¥—ä—ë–º–Ω–æ—Å—Ç—å: –¥–æ 2 —Ç–æ–Ω–Ω.\n–ó–≤–æ–Ω–∏—Ç–µ –∏–ª–∏ –ø–∏—à–∏—Ç–µ, –∏ –º—ã –æ–±—Å—É–¥–∏–º –≤–∞—à—É –∑–∞—è–≤–∫—É!""",
    """–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –≥—Ä—É–∑–æ–ø–µ—Ä–µ–≤–æ–∑–∫–∏ –¥–ª—è –≤–∞—Å!\n\n–ú—ã –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏ –¥–æ—Å—Ç—É–ø–Ω—ã–µ —É—Å–ª—É–≥–∏ –ø–æ –ø–µ—Ä–µ–≤–æ–∑–∫–µ –≥—Ä—É–∑–æ–≤ –ø–æ –≥–æ—Ä–æ–¥—É –∏ –æ–±–ª–∞—Å—Ç–∏. –ì–æ—Ç–æ–≤—ã –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å –∏ —É—á–µ—Å—Ç—å –≤—Å–µ –≤–∞—à–∏ –ø–æ–∂–µ–ª–∞–Ω–∏—è.\n\n–¢–∞—Ä–∏—Ñ—ã –Ω–∞ –Ω–∞—à–∏ —É—Å–ª—É–≥–∏:\n\n–ì–ê–ó–µ–ª—å (–ø–æ –≥–æ—Ä–æ–¥—É): –æ—Ç 900 —Ä—É–±./—á–∞—Å, –º–∏–Ω–∏–º—É–º 2 —á–∞—Å–∞.\n–ú–µ–∂–≥–æ—Ä–æ–¥ (–±–æ–ª–µ–µ 200 –∫–º): –æ—Ç 40 —Ä—É–±./–∫–º.\n–ù–æ–≤—ã–µ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏: –æ—Ç 46 —Ä—É–±./–∫–º (—Å –º–µ—Å—Ç–∞ –ø–æ–≥—Ä—É–∑–∫–∏).\n–ì—Ä—É–∑—á–∏–∫–∏: –æ—Ç 500 —Ä—É–±./—á–∞—Å.\n\n–ü–æ—á–µ–º—É –≤—ã–±–∏—Ä–∞—é—Ç –Ω–∞—Å:\n\n–ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å: –∞–∫–∫—É—Ä–∞—Ç–Ω–æ –ø–µ—Ä–µ–≤–µ–∑—ë–º –≤–∞—à–∏ –≤–µ—â–∏, –º–µ–±–µ–ª—å –∏–ª–∏ —Ç–µ—Ö–Ω–∏–∫—É.\n–ö—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω–∞—è –ø–æ–¥–∞—á–∞ –∞–≤—Ç–æ.\n–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –≥—Ä—É–∑—á–∏–∫–æ–≤.\n–†–∞–±–æ—Ç–∞–µ–º –Ω–µ —Ç–æ–ª—å–∫–æ –ø–æ –≥–æ—Ä–æ–¥—É, –Ω–æ –∏ –≤ –¥—Ä—É–≥–∏—Ö —Ä–µ–≥–∏–æ–Ω–∞—Ö.\n–ì–æ—Ç–æ–≤—ã –∫ —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤—É —Å –ò–ü.\n\n–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:\n\n–î–ª–∏–Ω–∞ –∫—É–∑–æ–≤–∞: 4 –º.\n–í—ã—Å–æ—Ç–∞: 1,76 –º.\n–®–∏—Ä–∏–Ω–∞: 1,80 –º.\n–ì—Ä—É–∑–æ–ø–æ–¥—ä—ë–º–Ω–æ—Å—Ç—å: –¥–æ 2 —Ç–æ–Ω–Ω.\n–°–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏ —É–¥–æ–±–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º! –ú—ã –ø–æ–º–æ–∂–µ–º —Å –ø–µ—Ä–µ–µ–∑–¥–æ–º –∏ –¥—Ä—É–≥–∏–º–∏ –∑–∞–¥–∞—á–∞–º–∏.""",
]

# –ó–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
async def random_delay():
    delay = random.uniform(60, 300)  # –ü–∞—É–∑–∞ –æ—Ç 1 –¥–æ 5 –º–∏–Ω—É—Ç —Å –ø–ª–∞–≤–∞—é—â–µ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π
    logging.info(f"–ó–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è: {round(delay, 2)} —Å–µ–∫—É–Ω–¥.")
    await asyncio.sleep(delay)

# –ò–º–∏—Ç–∞—Ü–∏—è –Ω–∞–±–æ—Ä–∞ —Ç–µ–∫—Å—Ç–∞
async def typing_simulation(chat_id):
    typing_duration = random.uniform(3, 15)  # –ò–º–∏—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–±–æ—Ä —Ç–µ–∫—Å—Ç–∞ –æ—Ç 3 –¥–æ 15 —Å–µ–∫—É–Ω–¥
    logging.info(f"–ò–º–∏—Ç–∏—Ä—É–µ–º –Ω–∞–±–æ—Ä —Ç–µ–∫—Å—Ç–∞ –≤ —á–∞—Ç–µ {chat_id} –≤ —Ç–µ—á–µ–Ω–∏–µ {round(typing_duration, 2)} —Å–µ–∫—É–Ω–¥.")
    await client.send_message(chat_id, ".", parse_mode="markdown")  # –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ –Ω–∞–±–æ—Ä–∞ —Ç–µ–∫—Å—Ç–∞
    await asyncio.sleep(typing_duration)

# –û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç—á—ë—Ç–∞
async def send_report(success: bool, chat_title: str, message: str):
    report = "üìù **–û—Ç—á—ë—Ç –ø–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º:**\n\n"
    if success:
        report += f"‚úÖ –£—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤: {chat_title}\n"
    else:
        report += f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è –≤: {chat_title}\n"
        report += f"–ü—Ä–∏—á–∏–Ω–∞: {message}\n"
    try:
        logging.info(Fore.GREEN + "–û—Ç—á—ë—Ç: " + report)
    except Exception as e:
        logging.error(Fore.RED + f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ç—á—ë—Ç–∞: {e}")# -
